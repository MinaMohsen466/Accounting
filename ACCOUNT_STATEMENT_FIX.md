# ๐ง ุฅุตูุงุญ ูุดููุฉ ุนุฏู ุธููุฑ ุงูุจูุงูุงุช ูู ูุดู ุงูุญุณุงุจ

## ๐ ุงููุดููุฉ

ุนูุฏ ูุชุญ ูุดู ุญุณุงุจ ูุนูููุ ูุง ุชุธูุฑ ุฃู ุจูุงูุงุช ุฑุบู ูุฌูุฏ ููุงุชูุฑ ููุนููู.

### ุงูุณุจุจ:
- ุงูููุงุชูุฑ ูู ุงููุธุงู ุชุณุชุฎุฏู ุญูู `clientId`
- ูุดู ุงูุญุณุงุจ ูุงู ูุจุญุซ ุนู `customerId` ู `supplierId`
- ุนุฏู ุชุทุงุจู ุฃุณูุงุก ุงูุญููู ุฃุฏู ูุนุฏู ุฅูุฌุงุฏ ุฃู ููุงุชูุฑ

---

## โ ุงูุญู ุงููุทุจู

### 1. ุชุญุฏูุซ ุฏุงูุฉ `getCustomerSupplierStatement`

ุชู ุชุนุฏูู ุงูููุชุฑุฉ ูุชุฏุนู ููุง ุงูุญูููู:

```javascript
// ูุจู ุงูุชุนุฏูู โ
const entityInvoices = invoices.filter(invoice => {
  if (entityType === 'customer') {
    return invoice.type === 'sales' && invoice.customerId === entityId
  } else {
    return invoice.type === 'purchase' && invoice.supplierId === entityId
  }
})

// ุจุนุฏ ุงูุชุนุฏูู โ
const entityInvoices = invoices.filter(invoice => {
  if (entityType === 'customer') {
    // Check both customerId and clientId
    return invoice.type === 'sales' && 
           (invoice.customerId === entityId || invoice.clientId === entityId)
  } else {
    // Check both supplierId and clientId
    return invoice.type === 'purchase' && 
           (invoice.supplierId === entityId || invoice.clientId === entityId)
  }
})
```

### 2. ุฅุถุงูุฉ Debug Logging

ุชู ุฅุถุงูุฉ ูุนูููุงุช ุชุดุฎูุตูุฉ ูู:
- ุฏุงูุฉ `getCustomerSupplierStatement` ูู `useAccounting.js`
- ุฏุงูุฉ `generateStatement` ูู `AccountStatement.jsx`

---

## ๐งช ููููุฉ ุงูุงุฎุชุจุงุฑ

### ุงูุฎุทูุฉ 1: ุงูุชุญ Console ูู ุงููุชุตูุญ
ุงุถุบุท `F12` โ ุงุฐูุจ ูุชุจููุจ `Console`

### ุงูุฎุทูุฉ 2: ุงูุชุญ ูุดู ุงูุญุณุงุจ
1. ุงุฐูุจ ุฅูู "๐ ูุดู ุญุณุงุจ"
2. ุงุฎุชุฑ ุนููู
3. ุงุฎุชุฑ ุงููุชุฑุฉ
4. ุงุถุบุท "ุนุฑุถ ุงููุดู"

### ุงูุฎุทูุฉ 3: ุฑุงุฌุน ุงููุนูููุงุช ูู Console

ุณุชุฌุฏ ูุนูููุงุช ูุซู:
```
๐ Generating statement: {
  entityId: "1234",
  entityType: "customer",
  startDate: "2025-09-30",
  endDate: "2025-10-19",
  totalInvoices: 5,
  totalCustomers: 3,
  totalSuppliers: 2
}

๐ Statement Debug: {
  entityId: "1234",
  entityType: "customer",
  totalInvoices: 5,
  filteredInvoices: 2,  โ ุนุฏุฏ ุงูููุงุชูุฑ ุงููุทุงุจูุฉ
  invoicesSample: [
    {
      id: "inv1",
      type: "sales",
      clientId: "1234",      โ ุงูุญูู ุงููุณุชุฎุฏู
      customerId: undefined,
      supplierId: undefined
    }
  ]
}

๐ Statement result: {
  transactions: [...],
  openingBalance: 0,
  closingBalance: 1550
}
```

---

## ๐ฏ ูุง ูุฌุจ ุฃู ุชุฑุงู ุงูุขู

### ุฅุฐุง ูุงู ูู ุดูุก ูุนูู โ:
- `filteredInvoices` > 0 (ููุฌุฏ ููุงุชูุฑ ูุทุงุจูุฉ)
- `transactions` ูููุก ุจุงูุจูุงูุงุช
- ุงููุดู ูุธูุฑ ุฌููุน ุงูููุงุชูุฑ

### ุฅุฐุง ูู ุชุธูุฑ ุงูุจูุงูุงุช โ:
ุฑุงุฌุน ูู Console:
- ูู `totalInvoices` > 0ุ (ููุฌุฏ ููุงุชูุฑ ูู ุงููุธุงู)
- ูู `filteredInvoices` = 0ุ (ูุง ุชูุฌุฏ ูุทุงุจูุฉ)
- ุฑุงุฌุน `invoicesSample` ููุนุฑูุฉ ุงูุญููู ุงููุณุชุฎุฏูุฉ

---

## ๐ ุณููุงุฑูููุงุช ูุญุชููุฉ

### ุณููุงุฑูู 1: ุงูููุงุชูุฑ ุชุณุชุฎุฏู `clientId`
```javascript
// ุงููุงุชูุฑุฉ ูู ุงููุธุงู:
{
  type: "sales",
  clientId: "customer123",  โ
  customerId: undefined
}

// ุงูุขู ุณูุนูู โ ูุฃููุง ูุจุญุซ ูู ููุง ุงูุญูููู
```

### ุณููุงุฑูู 2: ุงูููุงุชูุฑ ุชุณุชุฎุฏู `customerId`
```javascript
// ุงููุงุชูุฑุฉ ูู ุงููุธุงู:
{
  type: "sales",
  customerId: "customer123",  โ
  clientId: undefined
}

// ุณูุนูู ุฃูุถุงู โ
```

### ุณููุงุฑูู 3: ุงููุธุงู ูุฎุชูุท
```javascript
// ููุงุชูุฑ ูุฏููุฉ:
{ clientId: "customer123" }

// ููุงุชูุฑ ุฌุฏูุฏุฉ:
{ customerId: "customer123" }

// ุงููู ุณูุนูู โ
```

---

## ๐ ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช

### ูู Consoleุ ุฌุฑุจ:
```javascript
// 1. ุนุฑุถ ุฌููุน ุงูููุงุชูุฑ
invoices

// 2. ุนุฑุถ ููุงุชูุฑ ุนููู ูุนูู
invoices.filter(inv => inv.clientId === 'ุนููู_ID_ููุง')

// 3. ุนุฑุถ ุงูุนููุงุก
customers

// 4. ุนุฑุถ ุงูููุฑุฏูู
suppliers
```

---

## ๐๏ธ ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ

### ุงุญุชูุงู 1: ุงูููุงุชูุฑ ุบูุฑ ูุฑุชุจุทุฉ ุจุงูุนููู
**ุงูุญู:**
- ุงูุชุญ ุงููุงุชูุฑุฉ
- ุชุฃูุฏ ูู ุงุฎุชูุงุฑ ุงูุนููู ุจุดูู ุตุญูุญ
- ุงุญูุธ ุงููุงุชูุฑุฉ

### ุงุญุชูุงู 2: ุงููุชุฑุฉ ุงูุฒูููุฉ ุฎุงุทุฆุฉ
**ุงูุญู:**
- ุชุฃูุฏ ุฃู ุชุงุฑูุฎ ุงูููุงุชูุฑ ุถูู ุงููุชุฑุฉ ุงููุญุฏุฏุฉ
- ุฌุฑุจ ุงุฎุชูุงุฑ "ูู 2020-01-01 ุฅูู 2030-12-31"

### ุงุญุชูุงู 3: ููุน ุงููุงุชูุฑุฉ ุฎุงุทุฆ
**ุงูุญู:**
- ููุนููุงุก: ุชุฃูุฏ ุฃู `invoice.type === 'sales'`
- ููููุฑุฏูู: ุชุฃูุฏ ุฃู `invoice.type === 'purchase'`

---

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ุงูุชูุงูู ุงูุนูุณู**: ุงูุญู ูุฏุนู ููุง ุงููุธุงููู (ุงููุฏูู ูุงูุฌุฏูุฏ)
2. **ุงูุฃุฏุงุก**: ูุง ูุคุซุฑ ุนูู ุงูุฃุฏุงุก (ููุท OR ุฅุถุงูู ูู ุงูููุชุฑุฉ)
3. **Debug Logs**: ูููู ุฅุฒุงูุชูุง ุจุนุฏ ุงูุชุฃูุฏ ูู ุงูุญู

---

## โ ูุงุฆูุฉ ุงูุชุญูู

- [x] ุชุญุฏูุซ ุฏุงูุฉ ุงูููุชุฑุฉ ูุฏุนู ููุง ุงูุญูููู
- [x] ุฅุถุงูุฉ debug logging
- [x] ุงุฎุชุจุงุฑ ุนุฏู ูุฌูุฏ ุฃุฎุทุงุก
- [ ] ุงุฎุชุจุงุฑ ูุน ุจูุงูุงุช ุญููููุฉ
- [ ] ุงูุชุญูู ูู ุธููุฑ ุฌููุน ุงูููุงุชูุฑ
- [ ] ุฅุฒุงูุฉ debug logs (ุงุฎุชูุงุฑู)

---

## ๐ฏ ุงููุชูุฌุฉ ุงููุชููุนุฉ

ุนูุฏ ูุชุญ ูุดู ุญุณุงุจ ูุนููู ูุฏูู ููุงุชูุฑุ ูุฌุจ ุฃู ุชุฑู:
- โ ุฌููุน ุงูููุงุชูุฑ ูุน ุญุงูุงุชูุง
- โ ุนูููุงุช ุงูุณุฏุงุฏ
- โ ุงูุฅุญุตุงุฆูุงุช ุงูุตุญูุญุฉ
- โ ุงูุฑุตูุฏ ุงูุตุญูุญ

---

**ุชุงุฑูุฎ ุงูุฅุตูุงุญ**: 19 ุฃูุชูุจุฑ 2025
**ุงูุญุงูุฉ**: โ ุฌุงูุฒ ููุงุฎุชุจุงุฑ

# ูุธุงู ุญุฐู ูุชุนุฏูู ุงูููุงุชูุฑ ุงููุญุณูู

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุทููุฑ ูุธุงู ุดุงูู ูุฅุฏุงุฑุฉ ุญุฐู ูุชุนุฏูู ุงูููุงุชูุฑ ูู ูุธุงู ุงููุญุงุณุจุฉุ ูุน ุงูุชุฑููุฒ ุนูู:
- โ ุญูุงูุฉ ุงูุจูุงูุงุช ูู ุงูุญุฐู ุบูุฑ ุงูุขูู
- โ ุงูุชุญูู ูู ุงููุฎุฒูู ูุจู ุฃู ุนูููุฉ
- โ ุงูุชุญูู ุงููุงูู ูู ุงูุตูุงุญูุงุช
- โ ุนูุณ ุงููููุฏ ุงููุญุงุณุจูุฉ ูุงููุฎุฒูู ุจุฏูุฉ

---

## ๐ 1. ุตูุงุญูุงุช ุงูุณูุฏุงุช (Vouchers Permissions)

### ุงูุชุบููุฑุงุช ูู `UserPermissionsModal.jsx`

ุชูุช ุฅุถุงูุฉ ุตูุงุญูุงุช ุงูุณูุฏุงุช (ูุจุถ ูุตุฑู) ูู ูุงุฌูุฉ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู:

#### ุงูุตูุงุญูุงุช ุงูุฌุฏูุฏุฉ:
```javascript
// Vouchers (Receipt & Payment)
'view_vouchers': 'ุนุฑุถ ุงูุณูุฏุงุช',
'create_receipt_vouchers': 'ุฅูุดุงุก ุณูุฏุงุช ูุจุถ',
'create_payment_vouchers': 'ุฅูุดุงุก ุณูุฏุงุช ุตุฑู',
'edit_vouchers': 'ุชุนุฏูู ุงูุณูุฏุงุช',
'delete_vouchers': 'ุญุฐู ุงูุณูุฏุงุช',
```

#### ุชูุฒูุน ุงูุตูุงุญูุงุช ุญุณุจ ุงูุฏูุฑ:

##### ูุฏูุฑ ุงููุธุงู (Admin):
- โ ุฌููุน ุตูุงุญูุงุช ุงูุณูุฏุงุช

##### ูุฏูุฑ (Manager):
- โ ุนุฑุถ ุงูุณูุฏุงุช
- โ ุฅูุดุงุก ุณูุฏุงุช ูุจุถ
- โ ุฅูุดุงุก ุณูุฏุงุช ุตุฑู
- โ ุชุนุฏูู ุงูุณูุฏุงุช
- โ ุญุฐู ุงูุณูุฏุงุช (ูุญููุฉ ูููุฏูุฑ ุงูุนุงู ููุท)

##### ูุญุงุณุจ (Accountant):
- โ ุนุฑุถ ุงูุณูุฏุงุช
- โ ุฅูุดุงุก ุณูุฏุงุช ูุจุถ
- โ ุฅูุดุงุก ุณูุฏุงุช ุตุฑู
- โ ุชุนุฏูู ุงูุณูุฏุงุช
- โ ุญุฐู ุงูุณูุฏุงุช

##### ูุณุชุฎุฏู ุนุงุฏู (User):
- โ ุนุฑุถ ุงูุณูุฏุงุช ููุท
- โ ูุง ููููู ุฅูุดุงุก ุฃู ุชุนุฏูู ุฃู ุญุฐู

### ูุฆุฉ ุฌุฏูุฏุฉ ูู ูุงุฌูุฉ ุงูุตูุงุญูุงุช:
```javascript
'ุงูุณูุฏุงุช (ูุจุถ ูุตุฑู)': [
  'view_vouchers',
  'create_receipt_vouchers',
  'create_payment_vouchers',
  'edit_vouchers',
  'delete_vouchers'
]
```

---

## ๐๏ธ 2. ูุธุงู ุญุฐู ุงููุงุชูุฑุฉ ุงููุญุณูู

### ููุฒุงุช ุงููุธุงู ุงูุฌุฏูุฏ:

#### ุฃ. ููุน ุญุฐู ุงููุฑุชุฌุนุงุช
```javascript
// โ ุงูุชุญูู ูู ุฃู ุงููุงุชูุฑุฉ ููุณุช ูุฑุชุฌุน
if (invoice.isReturn) {
  alert('โ ูุง ูููู ุญุฐู ุงููุฑุชุฌุนุงุช!');
  return;
}
```

**ุงูุณุจุจ:** ุงููุฑุชุฌุนุงุช ูุฑุชุจุทุฉ ุจููุงุชูุฑ ุฃุตููุฉ ููุฌุจ ุนุฏู ุญุฐููุง ุจุดูู ูุณุชูู.

---

#### ุจ. ููุน ุญุฐู ุงููุงุชูุฑุฉ ุงูุชู ููุง ูุฑุชุฌุนุงุช
```javascript
// โ ุงูุชุญูู ูู ุนุฏู ูุฌูุฏ ูุฑุชุฌุนุงุช ูุฑุชุจุทุฉ
const relatedReturns = invoices.filter(inv => 
  inv.isReturn && inv.originalInvoiceId === invoice.id
);

if (relatedReturns.length > 0) {
  alert(`โ ูุง ูููู ุญุฐู ูุฐู ุงููุงุชูุฑุฉ!\n\n` +
        `ููุฌุฏ ${relatedReturns.length} ูุฑุชุฌุน ูุฑุชุจุท ุจูุฐู ุงููุงุชูุฑุฉ.\n` +
        `ูุฌุจ ุญุฐู ุงููุฑุชุฌุนุงุช ุฃููุงู ูุจู ุญุฐู ุงููุงุชูุฑุฉ ุงูุฃุตููุฉ.`);
  return;
}
```

**ุงูุณุจุจ:** ุญุฐู ุงููุงุชูุฑุฉ ุงูุฃุตููุฉ ูุจู ุงููุฑุชุฌุนุงุช ูุคุฏู ุฅูู ุจูุงูุงุช ูุชููุฉ (orphaned data).

---

#### ุฌ. ุงูุชุญูู ูู ุงููุฎุฒูู (ููุงุชูุฑ ุงููุดุชุฑูุงุช ููุท)

```javascript
if (invoice.type === 'purchase' && invoice.items) {
  const inventoryItems = getInventoryItems();
  const insufficientItems = [];
  
  invoice.items.forEach(item => {
    const inventoryItem = inventoryItems.find(inv => inv.name === item.itemName);
    const currentQty = parseFloat(inventoryItem.quantity) || 0;
    const itemQty = parseFloat(item.quantity) || 0;
    
    // ุนูุฏ ุญุฐู ูุงุชูุฑุฉ ูุดุชุฑูุงุชุ ุณูุฎุตู ุงููููุฉ ูู ุงููุฎุฒูู
    if (currentQty < itemQty) {
      insufficientItems.push({
        name: item.itemName,
        required: itemQty,
        available: currentQty,
        shortage: itemQty - currentQty
      });
    }
  });
  
  if (insufficientItems.length > 0) {
    // ุนุฑุถ ุฑุณุงูุฉ ุชูุตูููุฉ ุจุงูุฃุตูุงู ุงููุงูุตุฉ
    alert('โ ูุง ูููู ุญุฐู ูุงุชูุฑุฉ ุงููุดุชุฑูุงุช!\n\n' + 
          'ุงูุฃุตูุงู ุงูุชุงููุฉ ุบูุฑ ูุชููุฑุฉ ุจุงููููุงุช ุงููุทููุจุฉ...');
    return;
  }
}
```

**ุงููุฑู ุจูู ุงููุดุชุฑูุงุช ูุงููุจูุนุงุช:**

| ููุน ุงููุงุชูุฑุฉ | ุนูุฏ ุงูุฅูุดุงุก | ุนูุฏ ุงูุญุฐู | ุงูุชุญูู ุงููุทููุจ |
|-------------|-------------|-----------|----------------|
| **ูุดุชุฑูุงุช** | ุฅุถุงูุฉ ูููุฎุฒูู | ุฎุตู ูู ุงููุฎุฒูู | โ **ูุนู** - ูุฌุจ ุชููุฑ ุงููููุฉ |
| **ูุจูุนุงุช** | ุฎุตู ูู ุงููุฎุฒูู | ุฅุถุงูุฉ ูููุฎุฒูู | โ **ูุง** - ุงูุฅุถุงูุฉ ุฏุงุฆูุงู ุขููุฉ |

**ูุซุงู:**
- ูุงุชูุฑุฉ ูุดุชุฑูุงุช: ุงุดุชุฑูุช 100 ูุทุนุฉ
- ุจุนุชู 80 ูุทุนุฉ ูู ุงูู100
- ูุชุจูู ูู ุงููุฎุฒูู: 20 ูุทุนุฉ
- **ูุง ูููู ุญุฐู ูุงุชูุฑุฉ ุงููุดุชุฑูุงุช** ูุฃู ุงููุฎุฒูู ูุง ูุญุชูู ุนูู 100 ูุทุนุฉ ููุฎุตู!

---

#### ุฏ. ุฑุณุงูุฉ ุชุฃููุฏ ุชูุตูููุฉ

```javascript
const confirmMessage = 
  `ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ุงููุงุชูุฑุฉ "${invoice.invoiceNumber}"?\n\n` +
  `ุณูุชู:\n` +
  `โข ุนูุณ ุงููููุฏ ุงููุญุงุณุจูุฉ\n` +
  `โข ${invoice.type === 'sales' ? 'ุฅุถุงูุฉ ุงููููุงุช ุฅูู' : 'ุฎุตู ุงููููุงุช ูู'} ุงููุฎุฒูู\n` +
  `โข ุญุฐู ุงููุงุชูุฑุฉ ููุงุฆูุงู`;
```

---

#### ูู. ุฅุฎูุงุก ุฒุฑ ุงูุญุฐู ูู ุงููุฑุชุฌุนุงุช

```javascript
{/* ุฒุฑ ุงูุญุฐู: ูุธูุฑ ููุท ููููุงุชูุฑ ุงูุฃุตููุฉ ูููุณ ูููุฑุชุฌุนุงุช */}
{hasPermission('delete_invoices') && !invoice.isReturn && (
  <button 
    className="btn btn-danger btn-sm"
    onClick={() => handleDelete(invoice)}
  >
    ๐๏ธ {language === 'ar' ? 'ุญุฐู' : 'Delete'}
  </button>
)}
```

**ุงููุชูุฌุฉ:** ุงููุฑุชุฌุนุงุช ูุง ุชุญุชูู ุนูู ุฒุฑ ุญุฐู ูู ุงูุฃุณุงุณ!

---

### ุฎุทูุงุช ุงูุญุฐู ุจุงูุชูุตูู:

```javascript
// 1. ุงูุชุญูู ูู ุงูุตูุงุญูุงุช (hasPermission('delete_invoices'))
// 2. ุงูุชุญูู ูู ุฃู ุงููุงุชูุฑุฉ ููุณุช ูุฑุชุฌุน
// 3. ุงูุชุญูู ูู ุนุฏู ูุฌูุฏ ูุฑุชุฌุนุงุช ูุฑุชุจุทุฉ
// 4. ุงูุชุญูู ูู ุงููุฎุฒูู (ูููุดุชุฑูุงุช ููุท)
// 5. ุชุฃููุฏ ุงููุณุชุฎุฏู
// 6. ุนูุณ ุงููููุฏ ุงููุญุงุณุจูุฉ (reverseJournalEntriesForInvoice)
// 7. ุนูุณ ุชุฃุซูุฑ ุงููุฎุฒูู (reverseInventoryEffectsOnDelete)
// 8. ุญุฐู ุงููุงุชูุฑุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช (deleteInvoice)
// 9. ุชุญุฏูุซ ุงูุจูุงูุงุช (refreshAllData)
```

---

## โ๏ธ 3. ูุธุงู ุชุนุฏูู ููุงุชูุฑ ุงููุจูุนุงุช

### ุงููุฑู ุจูู ุชุนุฏูู ุงููุดุชุฑูุงุช ูุงููุจูุนุงุช:

| ููุน ุงููุงุชูุฑุฉ | ุฅููุงููุฉ ุงูุชุนุฏูู | ุงูุณุจุจ |
|-------------|-----------------|-------|
| **ูุดุชุฑูุงุช** | โ ุงูููุงุญุธุงุช ููุท | ุชุฌูุจ ุชุนููุฏุงุช ุงููุฎุฒูู ูุชูููุฉ ุงูุจุถุงุนุฉ |
| **ูุจูุนุงุช** | โ ุชุนุฏูู ูุงูู | ูุฑููุฉ ูู ุฎุฏูุฉ ุงูุนููุงุก ูุชุตุญูุญ ุงูุฃุฎุทุงุก |

### ููุฒุงุช ุชุนุฏูู ูุงุชูุฑุฉ ุงููุจูุนุงุช:

#### ุฃ. ุฒุฑ ุงูุชุนุฏูู ุงููุญุณูู
```javascript
{hasPermission('edit_invoices') && (
  <button 
    className="btn btn-secondary btn-sm"
    onClick={() => openModal(invoice)}
  >
    {invoice.type === 'sales' && !invoice.isReturn ? 'โ๏ธ ' : ''}
    {language === 'ar' ? 'ุนุฑุถ/ุชุนุฏูู' : 'View/Edit'}
  </button>
)}
```

**ุงูููุงุฆุฏ:**
- ุฒุฑ ูุงุญุฏ ูุนุฑุถ ูุชุนุฏูู ุงููุงุชูุฑุฉ
- ุฃููููุฉ ููู โ๏ธ ูููุงุชูุฑ ุงููุจูุนุงุช ููุท
- ูุงุถุญ ูููุณุชุฎุฏู ุฃูู ูููู ุงูุชุนุฏูู

---

#### ุจ. ุงูุชุญูู ูู ุงููุฎุฒูู ุนูุฏ ุงูุชุนุฏูู

```javascript
if (editingInvoice && formData.type === 'sales') {
  const inventoryItems = getInventoryItems();
  
  // ุญุณุงุจ ุงููููุงุช ุงูุฃุตููุฉ ูุงูุฌุฏูุฏุฉ
  const productQuantities = {};
  const originalProductQuantities = {};
  
  validItems.forEach(item => {
    productQuantities[item.itemName] = 
      (productQuantities[item.itemName] || 0) + parseFloat(item.quantity);
  });
  
  editingInvoice.items.forEach(item => {
    originalProductQuantities[item.itemName] = 
      (originalProductQuantities[item.itemName] || 0) + parseFloat(item.quantity);
  });
  
  // ุงูุชุญูู ูู ุงููุฑู ูู ุงูุงุณุชููุงู
  for (const [productName, newQuantity] of Object.entries(productQuantities)) {
    const originalQuantity = originalProductQuantities[productName] || 0;
    const quantityDifference = newQuantity - originalQuantity;
    
    // ุฅุฐุง ูุงู ุงููุฑู ููุฌุจ (ุฒูุงุฏุฉ ูู ุงูุงุณุชููุงู)
    if (quantityDifference > 0) {
      const inventoryItem = inventoryItems.find(inv => inv.name === productName);
      const currentQty = parseFloat(inventoryItem.quantity) || 0;
      
      if (currentQty < quantityDifference) {
        setModalError(
          `ุงููููุฉ ุงูุฅุถุงููุฉ ุงููุทููุจุฉ ูู ${productName} ุบูุฑ ูุชููุฑุฉ\n` +
          `ุงูุฒูุงุฏุฉ ุงููุทููุจุฉ: ${quantityDifference} โข ุงููุชููุฑ: ${currentQty}`
        );
        return;
      }
    }
  }
}
```

**ุงูููุทู:**
- โ ุฅุฐุง ุฒุงุฏุช ุงููููุฉ ุงููุจุงุนุฉ โ ุชุญูู ูู ุชููุฑ ุงูุฒูุงุฏุฉ ูู ุงููุฎุฒูู
- โ ุฅุฐุง ูููุช ุงููููุฉ ุงููุจุงุนุฉ โ ูุง ุชุญูู (ุณุชูุฑุฌุน ูููุฎุฒูู ุชููุงุฆูุงู)
- โ ุฅุฐุง ุจููุช ููุณ ุงููููุฉ โ ูุง ุชุญูู

---

#### ุฌ. ุฎุทูุงุช ุงูุชุนุฏูู ุงููุงููุฉ

```javascript
if (editingInvoice.type === 'sales') {
  // 1๏ธโฃ ุนูุณ ุชุฃุซูุฑ ุงููุงุชูุฑุฉ ุงููุฏููุฉ ุนูู ุงููุฎุฒูู
  editingInvoice.items.forEach(item => {
    const inventoryItem = inventoryItems.find(inv => inv.name === item.itemName);
    if (inventoryItem) {
      const currentQty = parseFloat(inventoryItem.quantity) || 0;
      const oldItemQty = parseFloat(item.quantity) || 0;
      const newQuantity = currentQty + oldItemQty; // ุฅุฑุฌุงุน ุงููููุฉ
      
      updateInventoryItem(inventoryItem.id, {
        ...inventoryItem,
        quantity: newQuantity
      });
    }
  });
  
  // 2๏ธโฃ ุนูุณ ุงููููุฏ ุงููุญุงุณุจูุฉ ุงููุฏููุฉ
  reverseJournalEntriesForInvoice(editingInvoice);
  
  // 3๏ธโฃ ุชุญุฏูุซ ุจูุงูุงุช ุงููุงุชูุฑุฉ
  result = updateInvoice(editingInvoice.id, invoiceData);
  
  if (result.success) {
    // 4๏ธโฃ ุชุทุจูู ุชุฃุซูุฑ ุงููุงุชูุฑุฉ ุงูุฌุฏูุฏุฉ ุนูู ุงููุฎุฒูู
    updateInventoryForSale(validItems);
    
    // 5๏ธโฃ ุชุณุฌูู ุงููููุฏ ุงููุญุงุณุจูุฉ ุงูุฌุฏูุฏุฉ
    // (ูุชู ุชููุงุฆูุงู ุนูุฏ ุญูุธ ุงููุงุชูุฑุฉ)
  }
}
```

**ุงููุชูุฌุฉ:** ุงูุชุนุฏูู ูุชู ุจุฏูุฉ ูุญุงุณุจูุฉ ูุงููุฉ!

---

## ๐ 4. ุนูุณ ุงููููุฏ ุงููุญุงุณุจูุฉ

### ุฏุงูุฉ `reverseJournalEntriesForInvoice`

```javascript
const reverseJournalEntriesForInvoice = (invoice) => {
  const journalEntries = JSON.parse(localStorage.getItem('journalEntries') || '[]');
  
  // ุงูุจุญุซ ุนู ุงููููุฏ ุงููุฑุชุจุทุฉ ุจุงููุงุชูุฑุฉ (ุจุงุณุชุซูุงุก ุงูุนูุณูุฉ)
  const relatedEntries = journalEntries.filter(entry => {
    if (!entry.reference) return false;
    if (entry.reference.startsWith('REV-')) return false; // ุชุฌุงูู ุงูุนูุณูุฉ
    if (entry.type === 'reversal') return false;
    
    return entry.reference.includes(invoice.invoiceNumber);
  });
  
  // ุฅูุดุงุก ููุฏ ุนูุณู ููู ููุฏ
  relatedEntries.forEach(entry => {
    const reversedLines = entry.lines.map(line => ({
      accountId: line.accountId,
      accountCode: line.accountCode,
      accountName: line.accountName,
      debit: parseFloat(line.credit) || 0,  // ๐ ุนูุณ ุงููุฏูู ูุงูุฏุงุฆู
      credit: parseFloat(line.debit) || 0,
      description: line.description
    }));
    
    const reversalEntry = {
      date: new Date().toISOString().split('T')[0],
      description: `ููุฏ ุนูุณู - ุญุฐู ูุงุชูุฑุฉ - ${entry.description}`,
      reference: `REV-${entry.reference}`,
      lines: reversedLines,
      type: 'reversal'
    };
    
    addJournalEntry(reversalEntry);
  });
};
```

**ูุซุงู:**

**ุงูููุฏ ุงูุฃุตูู (ูุงุชูุฑุฉ ูุจูุนุงุช):**
```
ูู ุญู/ ุงูููุฏูุฉ         1000 ุฏููุงุฑ  (ูุฏูู)
    ุฅูู ุญู/ ุงููุจูุนุงุช            1000 ุฏููุงุฑ  (ุฏุงุฆู)
```

**ุงูููุฏ ุงูุนูุณู (ุนูุฏ ุงูุญุฐู):**
```
ูู ุญู/ ุงููุจูุนุงุช       1000 ุฏููุงุฑ  (ูุฏูู)
    ุฅูู ุญู/ ุงูููุฏูุฉ            1000 ุฏููุงุฑ  (ุฏุงุฆู)
```

---

## ๐ฆ 5. ุนูุณ ุชุฃุซูุฑ ุงููุฎุฒูู

### ุฏุงูุฉ `reverseInventoryEffectsOnDelete`

```javascript
const reverseInventoryEffectsOnDelete = (deletedInvoice) => {
  if (!deletedInvoice || !deletedInvoice.items) return;
  
  deletedInvoice.items.forEach(item => {
    const inventoryItems = getInventoryItems();
    const inventoryItem = inventoryItems.find(inv => inv.name === item.itemName);
    
    if (inventoryItem) {
      const currentQty = parseFloat(inventoryItem.quantity) || 0;
      const itemQty = parseFloat(item.quantity) || 0;
      let newQuantity = currentQty;
      
      if (deletedInvoice.type === 'sales') {
        // ูุงุชูุฑุฉ ูุจูุนุงุช ูุญุฐููุฉ โ ุฅุฑุฌุงุน ุงููููุฉ ูููุฎุฒูู
        newQuantity = currentQty + itemQty;
      } else if (deletedInvoice.type === 'purchase') {
        // ูุงุชูุฑุฉ ูุดุชุฑูุงุช ูุญุฐููุฉ โ ุฎุตู ุงููููุฉ ูู ุงููุฎุฒูู
        newQuantity = Math.max(0, currentQty - itemQty);
      }
      
      updateInventoryItem(inventoryItem.id, {
        ...inventoryItem,
        quantity: newQuantity
      });
    }
  });
};
```

**ูุซุงู:**

| ููุน ุงููุงุชูุฑุฉ | ุงููููุฉ ุงูุฃุตููุฉ | ุงููููุฉ ูู ุงููุงุชูุฑุฉ | ุจุนุฏ ุงูุญุฐู | ุงูุญุณุงุจ |
|--------------|----------------|-------------------|----------|---------|
| **ูุจูุนุงุช** | 50 | 10 | 60 | 50 + 10 = 60 |
| **ูุดุชุฑูุงุช** | 60 | 10 | 50 | 60 - 10 = 50 |

---

## ๐ฏ 6. ููุฎุต ุงูููุงุฆุฏ

### ุญูุงูุฉ ุงูุจูุงูุงุช:
- โ ููุน ุญุฐู ุงููุฑุชุฌุนุงุช ููุงุฆูุงู
- โ ููุน ุญุฐู ุงููุงุชูุฑุฉ ุงูุชู ููุง ูุฑุชุฌุนุงุช
- โ ุงูุชุญูู ูู ุงููุฎุฒูู ูุจู ุงูุญุฐู (ูููุดุชุฑูุงุช)
- โ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ูููุตูุฉ

### ุงูุฏูุฉ ุงููุญุงุณุจูุฉ:
- โ ุนูุณ ุงููููุฏ ุงููุญุงุณุจูุฉ ุจุฏูุฉ
- โ ุนูุณ ุชุฃุซูุฑ ุงููุฎุฒูู ุจุดูู ุตุญูุญ
- โ ุชุณุฌูู ูููุฏ ุนูุณูุฉ ุจูุฑุฌุน ูุงุถุญ (REV-)
- โ ุชุญุฏูุซ ุดุงูู ููุจูุงูุงุช ุจุนุฏ ูู ุนูููุฉ

### ุงููุฑููุฉ:
- โ ุชุนุฏูู ูุงูู ูููุงุชูุฑ ุงููุจูุนุงุช
- โ ุงูุชุญูู ุงูุฐูู ูู ุงููุฎุฒูู (ุงููุฑู ููุท)
- โ ูุงุฌูุฉ ูุณุชุฎุฏู ูุญุณููุฉ ูุน ุฃููููุงุช ูุงุถุญุฉ
- โ ุตูุงุญูุงุช ููุตููุฉ ููุณูุฏุงุช

### ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู:
- โ ุฑุณุงุฆู ุชุฃููุฏ ุชูุตูููุฉ
- โ ุฑุณุงุฆู ุฎุทุฃ ุชูุถุญ ุงูุณุจุจ ูุงูุญู
- โ ุฃุฒุฑุงุฑ ูุงุถุญุฉ ููุชุณูุฉ
- โ ุฅุฎูุงุก ุฃุฒุฑุงุฑ ุบูุฑ ููุงุณุจุฉ (ูุซู ุญุฐู ุงููุฑุชุฌุน)

---

## ๐งช 7. ุณููุงุฑูููุงุช ุงูุงุฎุชุจุงุฑ

### ุงูุณููุงุฑูู 1: ุญุฐู ูุงุชูุฑุฉ ูุดุชุฑูุงุช (ูุฌุงุญ)
1. **ุงูุฅุนุฏุงุฏ:** ูุงุชูุฑุฉ ูุดุชุฑูุงุช 100 ูุทุนุฉุ ุงููุฎุฒูู: 100
2. **ุงูุฅุฌุฑุงุก:** ุญุฐู ุงููุงุชูุฑุฉ
3. **ุงููุชูุฌุฉ ุงููุชููุนุฉ:** 
   - โ ุงููุฎุฒูู ูุตุจุญ 0
   - โ ุนูุณ ุงููููุฏ ุงููุญุงุณุจูุฉ
   - โ ุญุฐู ุงููุงุชูุฑุฉ

### ุงูุณููุงุฑูู 2: ุญุฐู ูุงุชูุฑุฉ ูุดุชุฑูุงุช (ูุดู)
1. **ุงูุฅุนุฏุงุฏ:** ูุงุชูุฑุฉ ูุดุชุฑูุงุช 100 ูุทุนุฉุ ุงููุฎุฒูู: 30 (ุชู ุจูุน 70)
2. **ุงูุฅุฌุฑุงุก:** ูุญุงููุฉ ุญุฐู ุงููุงุชูุฑุฉ
3. **ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
   - โ ุฑุณุงูุฉ ุฎุทุฃ: "ุงููููุฉ ุงููุทููุจุฉ ุบูุฑ ูุชููุฑุฉ"
   - โ ูู ูุชู ุงูุญุฐู

### ุงูุณููุงุฑูู 3: ุญุฐู ูุงุชูุฑุฉ ููุง ูุฑุชุฌุน
1. **ุงูุฅุนุฏุงุฏ:** ูุงุชูุฑุฉ ูุจูุนุงุช + ูุฑุชุฌุน ูุฑุชุจุท ุจูุง
2. **ุงูุฅุฌุฑุงุก:** ูุญุงููุฉ ุญุฐู ุงููุงุชูุฑุฉ ุงูุฃุตููุฉ
3. **ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
   - โ ุฑุณุงูุฉ ุฎุทุฃ: "ููุฌุฏ X ูุฑุชุฌุน ูุฑุชุจุท"
   - โ ูู ูุชู ุงูุญุฐู

### ุงูุณููุงุฑูู 4: ูุญุงููุฉ ุญุฐู ูุฑุชุฌุน
1. **ุงูุฅุนุฏุงุฏ:** ูุฑุชุฌุน ูุจูุนุงุช
2. **ุงูุฅุฌุฑุงุก:** ุงูููุฑ ุนูู ููุทูุฉ ุงููุงุชูุฑุฉ (ูุง ููุฌุฏ ุฒุฑ ุญุฐู!)
3. **ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
   - โ ูุง ูุธูุฑ ุฒุฑ ุญุฐู
   - โ ุฅุฐุง ุชู ุงุณุชุฏุนุงุก handleDelete ุจุทุฑููุฉ ูุง โ ุฑุณุงูุฉ ุฎุทุฃ

### ุงูุณููุงุฑูู 5: ุชุนุฏูู ูุงุชูุฑุฉ ูุจูุนุงุช (ุฒูุงุฏุฉ ุงููููุฉ)
1. **ุงูุฅุนุฏุงุฏ:** ูุงุชูุฑุฉ ูุจูุนุงุช 10 ูุทุนุ ุงููุฎุฒูู: 5
2. **ุงูุฅุฌุฑุงุก:** ุชุนุฏูู ุงููููุฉ ุฅูู 12 ูุทุนุฉ (ุฒูุงุฏุฉ 2)
3. **ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
   - โ ุฑุณุงูุฉ ุฎุทุฃ: "ุงูุฒูุงุฏุฉ ุงููุทููุจุฉ: 2 โข ุงููุชููุฑ: 5"
   - โ ูู ูุชู ุงูุชุนุฏูู

### ุงูุณููุงุฑูู 6: ุชุนุฏูู ูุงุชูุฑุฉ ูุจูุนุงุช (ุชูููู ุงููููุฉ)
1. **ุงูุฅุนุฏุงุฏ:** ูุงุชูุฑุฉ ูุจูุนุงุช 10 ูุทุนุ ุงููุฎุฒูู: 0
2. **ุงูุฅุฌุฑุงุก:** ุชุนุฏูู ุงููููุฉ ุฅูู 8 ูุทุน (ุชูููู 2)
3. **ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
   - โ ูุฌุญ ุงูุชุนุฏูู (ูุง ุญุงุฌุฉ ููุชุญูู)
   - โ ุงููุฎุฒูู ูุตุจุญ 2

---

## ๐ 8. ุงููููุงุช ุงููุนุฏูุฉ

### `src/components/UserPermissionsModal.jsx`
- โ ุฅุถุงูุฉ ุตูุงุญูุงุช ุงูุณูุฏุงุช (5 ุตูุงุญูุงุช ุฌุฏูุฏุฉ)
- โ ุชุญุฏูุซ ุงูุตูุงุญูุงุช ุงูุงูุชุฑุงุถูุฉ ููุฃุฏูุงุฑ ุงูุฃุฑุจุนุฉ
- โ ุฅุถุงูุฉ ูุฆุฉ ุฌุฏูุฏุฉ "ุงูุณูุฏุงุช (ูุจุถ ูุตุฑู)"

### `src/components/Invoices.jsx`
- โ ุชุญุฏูุซ ุฏุงูุฉ `handleDelete` (ูู 20 ุณุทุฑ โ 90 ุณุทุฑ)
  - ุฅุถุงูุฉ ุงูุชุญูู ูู ุงููุฑุชุฌุนุงุช
  - ุฅุถุงูุฉ ุงูุชุญูู ูู ุงููุฎุฒูู
  - ุฑุณุงุฆู ุชุฃููุฏ ููุตูุฉ
- โ ุฅุฎูุงุก ุฒุฑ ุงูุญุฐู ูู ุงููุฑุชุฌุนุงุช
- โ ุชุญุณูู ุฒุฑ ุงูุชุนุฏูู (ุฅุถุงูุฉ ุฃููููุฉ โ๏ธ)
- โ ุฅุตูุงุญ ุงุณุชุฏุนุงุก `reverseJournalEntriesForInvoice`

---

## ๐ 9. ุงูุชูุตูุงุช ุงููุณุชูุจููุฉ

### ูุตูุฑุฉ ุงููุฏู:
1. ุฅุถุงูุฉ ุณุฌู ุชุฏููู (Audit Log) ููู ุนูููุฉ ุญุฐู/ุชุนุฏูู
2. ุฅููุงููุฉ ุงุณุชุนุงุฏุฉ ุงูููุงุชูุฑ ุงููุญุฐููุฉ (Soft Delete)
3. ุชูุฑูุฑ ุจุงููููุฏ ุงูุนูุณูุฉ

### ูุชูุณุทุฉ ุงููุฏู:
1. ุฅุดุนุงุฑุงุช ูููุฏูุฑ ุนูุฏ ุญุฐู ููุงุชูุฑ ูุจูุฑุฉ
2. ุญุฏ ุฃูุตู ููููุฉ ุงููุงุชูุฑุฉ ุงููุณููุญ ุจุญุฐููุง ุจุฏูู ููุงููุฉ
3. ูุธุงู ููุงููุงุช ูุชุนุฏุฏ ุงููุณุชููุงุช

### ุทูููุฉ ุงููุฏู:
1. ูุธุงู workflow ูุงูู ููุนูููุงุช ุงููุงููุฉ
2. ุชูุงูู ูุน ุฃูุธูุฉ ERP ุฎุงุฑุฌูุฉ
3. ุชุญูููุงุช ูุชูุฏูุฉ ูุฃููุงุท ุงูุญุฐู ูุงูุชุนุฏูู

---

## ๐ ุงูุฏุนู ุงูููู

ูู ุญุงูุฉ ูุฌูุฏ ุฃู ูุดุงูู:
1. ุชุญูู ูู ุตูุงุญูุงุช ุงููุณุชุฎุฏู
2. ุชุญูู ูู ุณุฌูุงุช Console (F12)
3. ุชุญูู ูู ุฑุณุงุฆู ุงูุฎุทุฃ ุงููุนุฑูุถุฉ
4. ุฑุงุฌุน ูุฐุง ุงููุณุชูุฏ ููุณููู ุงููุชููุน

---

**ุขุฎุฑ ุชุญุฏูุซ:** 2025-01-01  
**ุงูุฅุตุฏุงุฑ:** 5.2  
**ุงููุทูุฑ:** MinaMohsen466

---


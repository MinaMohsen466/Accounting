# 📖 دليل المستخدم السريع - كشف الحساب v3.0

## 🎯 الميزات الجديدة

### ✨ 1. الرصيد الابتدائي التلقائي
الآن عند فتح كشف حساب، سيتم جلب الرصيد الابتدائي تلقائياً من بيانات العميل أو المورد!

**مثال**:
```
إذا كان رصيد العميل في البيانات: 500 د.ك
سيظهر في كشف الحساب: 
└─ رصيد افتتاحي: 500.000 د.ك ✅
```

---

### 🏷️ 2. عمود النوع (بدلاً من الحالة)

بدلاً من "مدفوعة/معلقة/متأخرة"، سترى الآن:

| الرمز | النوع | المعنى | متى يظهر |
|-------|-------|---------|-----------|
| 📤 | **مدين** | المبلغ في خانة المدين فقط | فاتورة غير مدفوعة لعميل |
| 📥 | **دائن** | المبلغ في خانة الدائن فقط | سداد من عميل أو فاتورة من مورد |
| 📋 | **مدين ودائن** | المبلغ في كلا الخانتين | فاتورة مدفوعة |

---

## 📋 كيفية الاستخدام

### الخطوة 1: افتح كشف الحساب
من القائمة الجانبية، اضغط على **📋 كشف حساب**

### الخطوة 2: اختر نوع الحساب
- **عميل** 👤: لعرض فواتير المبيعات
- **مورد** 🏪: لعرض فواتير المشتريات

### الخطوة 3: ابحث واختر
1. استخدم **مربع البحث** للعثور على العميل/المورد
2. اختر من **القائمة المنسدلة**

### الخطوة 4: حدد الفترة الزمنية
- **من تاريخ**: تاريخ البداية
- **إلى تاريخ**: تاريخ النهاية

### الخطوة 5: اضغط "عرض الكشف"
سيظهر الكشف كاملاً! 🎉

---

## 📊 قراءة الكشف

### مثال عملي:

```
┌────────────────────────────────────────────────────────────────────────┐
│                         كشف حساب - محمد أحمد التجاري                  │
├──────────┬─────────┬────────────────┬──────────────┬───────┬──────┬─────┤
│ التاريخ  │ الفاتورة│ الوصف         │ النوع       │ مدين │ دائن│الرصيد│
├──────────┼─────────┼────────────────┼──────────────┼───────┼──────┼─────┤
│01/10/2025│    -    │رصيد افتتاحي    │      -       │   -   │  -   │300.0│ ← الرصيد من البيانات
├──────────┼─────────┼────────────────┼──────────────┼───────┼──────┼─────┤
│05/10/2025│ S0001   │فاتورة مبيعات   │📋 مدين ودائن│ 100.0 │100.0 │300.0│ ← مدفوعة
├──────────┼─────────┼────────────────┼──────────────┼───────┼──────┼─────┤
│10/10/2025│ S0002   │فاتورة مبيعات   │📤 مدين      │ 200.0 │  -   │500.0│ ← غير مدفوعة
├──────────┼─────────┼────────────────┼──────────────┼───────┼──────┼─────┤
│          │         │الرصيد الختامي  │              │ 300.0 │100.0 │500.0│ ← النتيجة النهائية
└──────────┴─────────┴────────────────┴──────────────┴───────┴──────┴─────┘

📊 إحصائيات:
   ✅ مدفوعة: 1 فاتورة - 100.000 د.ك
   ⏳ معلقة: 1 فاتورة - 200.000 د.ك
```

### شرح الأعمدة:

1. **التاريخ**: تاريخ الفاتورة
2. **رقم الفاتورة**: رقم مرجعي
3. **الوصف**: نوع العملية
4. **النوع**: 
   - 📤 مدين = يجب أن يدفع لك
   - 📥 دائن = دفع لك أو تدين له
   - 📋 كلاهما = مدفوعة ومسددة
5. **مدين**: المبالغ المستحقة (له)
6. **دائن**: المبالغ المدفوعة (عليه)
7. **الرصيد**: الرصيد الحالي

---

## 🎨 فهم الألوان

### على الشاشة:
- 🟦 **خلفية زرقاء فاتحة** = مدين
- 🟪 **خلفية بنفسجية فاتحة** = دائن
- 🟨 **خلفية صفراء فاتحة** = مدين ودائن

### في الرصيد:
- 🟢 **أخضر** = موجب (له - يدين لك)
- 🔴 **أحمر** = سالب (عليه - تدين له)

---

## 🖨️ الطباعة والتصدير

### طباعة الكشف:
1. اضغط **🖨️ طباعة**
2. في نافذة الطباعة:
   - ✅ فعّل **"طباعة الخلفيات"**
   - اختر حجم الورق **A4**
   - الاتجاه **عمودي**
3. اضغط طباعة

**ملاحظة**: الألوان ستظهر في الطباعة! 🎨

### تصدير إلى Excel:
1. اضغط **📊 تصدير Excel**
2. سيتم تنزيل ملف CSV
3. افتحه في Excel
4. ستجد:
   - معلومات الكشف
   - جميع الحركات
   - الإحصائيات

---

## ❓ أسئلة شائعة

### س: لماذا الرصيد الافتتاحي مختلف عن المتوقع؟
**ج**: الرصيد الافتتاحي يأتي من:
1. الرصيد المسجل في بيانات العميل/المورد
2. لتعديله، اذهب إلى **"العملاء والموردين"**
3. اضغط ✏️ تعديل للعميل
4. غيّر قيمة **"الرصيد"**

### س: ما الفرق بين "مدين" و "دائن"؟
**ج**:
- **📤 مدين**: أنت تطالب بالمبلغ (العميل مدين لك)
- **📥 دائن**: أنت ملزم بالمبلغ (أنت مدين له)

### س: متى يظهر "📋 مدين ودائن"؟
**ج**: عندما تكون الفاتورة **مدفوعة**، نعرض:
- الفاتورة في المدين
- السداد في الدائن
- كل ذلك في **سطر واحد**

### س: كيف أضيف رصيد ابتدائي لعميل جديد؟
**ج**:
1. اذهب إلى **العملاء والموردين**
2. عند إضافة عميل جديد، املأ حقل **"الرصيد"**
3. مثال: إذا كان يدين لك بـ 1000 د.ك، اكتب `1000`
4. إذا كنت تدين له بـ 500 د.ك، اكتب `-500`

### س: هل يتأثر الرصيد الفعلي عند طباعة الكشف؟
**ج**: لا، كشف الحساب للعرض فقط ولا يغير البيانات.

---

## 💡 نصائح للاستخدام الأمثل

### ✅ نصيحة 1: تحديث الأرصدة الابتدائية
قبل استخدام كشف الحساب لأول مرة:
1. راجع جميع العملاء والموردين
2. تأكد من صحة حقل "الرصيد" لكل منهم
3. هذا يضمن دقة الكشوف

### ✅ نصيحة 2: استخدام الفترات الزمنية
- **للمراجعة السريعة**: آخر 30 يوم
- **للتقارير الشهرية**: أول يوم إلى آخر يوم في الشهر
- **للمحاسبة السنوية**: سنة كاملة

### ✅ نصيحة 3: حفظ الكشوف
بعد تصدير الكشف:
1. احفظ الملف بتاريخ واسم العميل
2. مثال: `كشف_محمد_احمد_اكتوبر_2025.csv`
3. احتفظ بنسخة احتياطية

### ✅ نصيحة 4: المتابعة الدورية
- راجع كشوف العملاء **أسبوعياً**
- تابع الفواتير المعلقة والمتأخرة
- اتصل بالعملاء للتذكير بالمستحقات

---

## 🎯 حالات استخدام شائعة

### 🔍 حالة 1: مراجعة حساب عميل
**الهدف**: معرفة كم يدين العميل لك
1. افتح كشف حساب العميل
2. انظر إلى **الرصيد الختامي**
3. إذا كان **أخضر موجب** = له (يدين لك)
4. إذا كان **أحمر سالب** = عليه (أنت تدينه)

### 📧 حالة 2: إرسال كشف للعميل
1. افتح كشف الحساب
2. اضغط **🖨️ طباعة**
3. اختر **"حفظ كـ PDF"**
4. أرسل PDF عبر البريد الإلكتروني

### 📊 حالة 3: تقرير شهري
1. اختر الفترة: أول الشهر إلى آخره
2. اضغط **📊 تصدير Excel**
3. افتح في Excel
4. استخدمه في التقارير المالية

### 🔔 حالة 4: متابعة المتأخرات
1. افتح كشف الحساب
2. راجع قسم **الإحصائيات**
3. شاهد **فواتير متأخرة**
4. تواصل مع العملاء للتحصيل

---

## 🚨 تنبيهات مهمة

### ⚠️ تنبيه 1: الرصيد الابتدائي
- الرصيد الافتتاحي يُجلب من البيانات المحفوظة
- إذا كان غير صحيح، عدّله في صفحة العملاء/الموردين
- لن يتغير الرصيد الابتدائي تلقائياً بالفواتير القديمة

### ⚠️ تنبيه 2: الفواتير قبل الفترة
- الفواتير **قبل** تاريخ البداية تُحسب في الرصيد الافتتاحي
- الفواتير **داخل** الفترة تظهر في الجدول

### ⚠️ تنبيه 3: الطباعة
- للحصول على أفضل نتيجة، استخدم متصفح Chrome
- فعّل "طباعة الخلفيات" لرؤية الألوان

---

## 📞 الدعم

إذا واجهت أي مشكلة:
1. راجع هذا الدليل
2. تحقق من بيانات العميل/المورد
3. تأكد من وجود فواتير في الفترة المحددة

---

**آخر تحديث**: 19 أكتوبر 2025  
**الإصدار**: 3.0  
**الحالة**: ✅ جاهز للاستخدام
